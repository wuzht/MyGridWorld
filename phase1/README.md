# 阶段一 vi, Java, Ant, JUnit自学报告



## vi

vi编辑器是Unix及Linux系统内建的标准的文本编辑器，具有强大的程序编辑的能力，对程序设计很方便，Vi也是Linux中最基本的文本编辑器。据说学会它以后，将会在Linux的世界里畅行无阻。其实，我最初接触vi这个编辑器的时候，觉得它非常难用，而且界面不是很好看，所以平时很少使用。平时会比较多用sublime或者各种IDE中的编辑器等，但vi应该是最多程序员使用的编辑器，而且这次中级实训要求在Linux里面自学vi，如此一来，vi应该是有它自身的强大之处，只是我还没体会到而已，便自学了一下。

* 首先，基本上vi分为三种状态

  1. 命令模式（command mode)

     控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入插入模式、底行模式下。

     用户刚刚启动 vi/vim，便进入了命令模式。

     此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

     以下是常用的几个命令：

     * **i** 切换到输入模式，以输入字符。
     * **x** 删除当前光标所在处的字符。
     * **:** 切换到底线命令模式，以在最底一行输入命令。

     若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。

     命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

  2. 插入（编辑）模式（insert mode)

     只有在插入模式下，才可以做文字输入，按ESC键可回到命令模式。

     在命令模式下按下i就进入了输入模式。

     在输入模式中，可以使用以下按键：

     - **字符按键以及Shift组合**，输入字符
     - **ENTER**，回车键，换行
     - **BACK SPACE**，退格键，删除光标前一个字符
     - **DEL**，删除键，删除光标后一个字符
     - **方向键**，在文本中移动光标
     - **HOME**/**END**，移动光标到行首/行尾
     - **Page Up**/**Page Down**，上/下翻页
     - **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
     - **ESC**，退出输入模式，切换到命令模式

  3. 底行模式（last line mode)

     将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号。

     不过一般我们在使用时把vi简化成两个模式，就是将底行模式也算入命令模式。

     在命令模式下按下:（英文冒号）就进入了底线命令模式。

     底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

     在底线命令模式中，基本的命令有（已经省略了冒号）：

     - **q** 退出程序
     - **w** 保存文件

     按ESC键可随时退出底线命令模式。

* 基本操作

  * 进入vi

    在命令行里输入vi及文件名后，就进入vi的编辑画面了

    ```
    $ vi fileName
    ```

    进入到编辑界面后，是处于命令模式

  * 按下```i```进入编辑模式

    编辑好后，可按下ESC键返回命令模式

  * 在命令模式中输入```:wq```储存后离开vi

使用总结：在Linux下编辑某些文件还是比较方便的，比如编辑/etc/profile、~/.bashrc等文件的时候。但是vi本身有太多的命令和操作，自己在编程的时候还要常常去查阅那些操作，可能是因为我对其还不熟悉，所以实在是降低了编程的效率。个人还是更喜欢sublime和各种IDE的编辑器，代码补全、错误检查和输入提示（提示各种函数、变量）等功能会使编程的过程更加轻松愉快，更加有效率。

## Java

Java是一门面向对象的编程语言，不仅吸收了C++语言的各种优点，还摒弃了C++里难以理解的多继承、指针等概念，因此Java语言具有功能强大和简单易用两个特征。Java语言作为静态面向对象编程语言的代表，极好地实现了面向对象理论，允许程序员以优雅的思维方式进行复杂的编程。

Java语言的应用极其广泛，使用人数极多，影响力不俗。在学习Java时，我了解到，Java可以编写桌面应用程序、Web应用程序、分布式系统和嵌入式系统应用程序等。Java具有简单性、面向对象、分布式、健壮性、安全性、平台独立与可移植性、多线程、动态性等特点。

其实在大一的时候接触过Java了，不过那时候也只是学了那么一点点东西。到了这个学期实训之前，因为选上了两门课涉及C#的课程，现在来打Java，觉得Java和C#有惊人的相似（当然和C++也很像），因此学起来也比较容易上手。我觉得Java这个语言一个很大的好处就是摒弃了C/C++那些经常会令人头疼的指针。Java使用强大的内存管理，从而避免有安全问题的指针。在Java中有自动垃圾收集。 在Java中有异常处理和类型检查机制。所有这些点是使Java强大的理由。

本阶段的任务之一是使用Java写一个简单的计算器程序，重点就是学Java的GUI编程和事件处理。在这次的计算器中，用到了3个包，分别是java.awt、javax.swing和java.awt.event。首先首先我们需要将界面中要用到的UI组件（按钮、文本框）作为 Calculator 类的成员变量在一开始声明，然后在Calculator的构造函数里设置好这些UI组件的布局、外观等，然后将它们添加到javax.swing.JPanel容器

> JPanel 是一般轻量级容器，可以将其理解为一个盛放其他 UI 组件的“篮子”。 JPanel 位于 `javax.swing` 包中，为面板容器，可以加入到 JFrame 中 ， 它自身是个容器，也可以把其他 component （组件） 加入到 JPanel 中，例如 JButton、JTextArea、JTextField 等

当中，设置好计算器的frame的各种属性，此时编译运行，就可以看到界面了。看到有界面后，编程工作也就变得更加轻松愉快和有动力了。实现了界面之后，这时就要为各个按钮添加事件监听器来相应各种逻辑功能了（注意要在将部件添加到容器内之前注册监听器）。为一个个按钮注册监听器，如

```java
addBtn.addActionListener(new ButtonActionHandler("+"));
```

并且传递一个参数进去，以便让ActionHandler知道是按了哪一个按钮，此时我们要写一个按钮动作处理类ButtonActionHandler来实现ActionListener接口：

```java
private class ButtonActionHandler implements ActionListener {
	public ButtonActionHandler(String operator);
   	@Override
	public void actionPerformed(ActionEvent arg0);
	public String calculateResult(String op);
}
```

重点是实现actionPerformed方法。最后在主函数里new一个Calculator就OK了。

使用总结：Java用起来非常方便，功能强大，以后使用机会应该会很多，学习Java很重要。

## Ant

Apache Ant,是一个将软件编译、测试、部署等步骤联系在一起加以自动化的一个工具，大多用于Java环境中的软件开发。Apache Ant的构建文件是用XML编写，并采取了开放的标准，便于携带和易于理解的XML性质的优势。

Ant跟大一初级实训时用于C/C++的Makefile非常相似，可以说是同一类工具吧，都是代码的自动化部署工具。

Ant将实现以下功能的自动化：

* 编译代码
* 打包二进制文件
* 部署二进制文件到测试服务器
* 测试代码更改
* 从一个位置复制代码到另一个地方

当我们开发一些稍大型的项目时，用Ant这样的自动化部署工具是必不可少的，因为上述繁琐而重复的操作Ant已经帮我们自动完成了，我们也可以更加专心于编程。

Ant的构建文件是基于XML编写的，默认名称为build.xml。其中，最外层的是project元素，这是必须要有的，它有name、default、basedir等基本属性，其中default属性用于指定project默认执行时所执行的target的名称。project元素里面可包含多个target元素，target元素是Ant的基本执行单元，里面可以包含多个任务，target有name、depends等基本属性，简单来说，使用ant的时候，每个target元素可以看做为一个动作，可通过```ant targetName ```来执行某一个动作。另外，project里面可包含property元素，它的name和value属性可以看做定义一个个的变量名和变量值，类似于C语言里面的宏。

## JUnit

JUnit是一个开放源代码的Java测试框架，用于编写和运行可重复的测试。他是用于单元测试框架体系xUnit的一个实例（用于java语言）。它包括以下特性：

* 用于测试期望结果的断言（Assertion）
* 用于共享共同测试数据的测试工具
* 用于方便的组织和运行测试的测试套件
* 图形和文本的测试运行器

> 我们在编写大型程序的时候，需要写成千上万个方法或函数，这些函数的功能可能很强大，但我们在程序中只用到该函数的一小部分功能，并且经过调试可以确定，这一小部分功能是正确的。但是，我们同时应该确保每一个函数都完全正确，因为如果我们今后如果对程序进行扩展，用到了某个函数的其他功能，而这个功能有 bug 的话，那绝对是一件非常郁闷的事情。所以说，每编写完一个函数之后，都应该对这个函数的方方面面进行测试，这样的测试我们称之为单元测试。传统的编程方式，进行单元测试是一件很麻烦的事情，你要重新写另外一个程序，在该程序中调用你需要测试的方法，并且仔细观察运行结果，看看是否有错。正因为如此麻烦，所以程序员们编写单元测试的热情不是很高。于是有一个牛人推出了单元测试包，大大简化了进行单元测试所要做的工作，这就是 JUnit4。

首先要做的工作是配置JUnit。先确保在Linux上装好了Java环境，配置好环境变量。配置步骤如下：

1. 下载junit-4.9.jar的包，把它放到一个位置，这里的位置是`/home/administrator/Downloads/junit-4.9.jar`

2. 然后`vim ~/.bashrc` ，修改配置环境变量。在原本的代码下面添加这几行：

   ```
   export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_91
   export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:/home/administrator/Downloads/junit-4.9.jar:$CLASSPATH
   export PAHT=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PAHT:$HOME/bin
   ```

3. 然后

   ```
   source ~/.bashrc
   ```

   使之生效。


在Ant的build.xml文件里添加名字为test的targtet：

```xml
<target name="test" depends="compile">
    <junit printsummary="true">
        <formatter type="plain"/>
        <classpath path="${dest}"/>
        <test name="HelloWorldTest"/>
    </junit>
</target>
```

然后写好测试代码，```ant test```就可以测试了，另外在文件夹里会生成一个详细的测试报告。

使用总结：每编写完一个函数之后，都应该对这个函数的方方面面进行测试，即进行单元测试。如果没有JUnit，就需要我们手动一个个去写主函数，调用要测试的方法，十分麻烦。有了JUnit，大大简化了进行单元测试所要做的工作，对于一些错误，看看测试报告就一目了然，大大提高了编程效率。